

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CosmoSIS Concepts &mdash; CosmoSIS 3.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=26f62d79"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installing CosmoSIS" href="installation.html" />
    <link rel="prev" title="CosmoSIS: The COSMOlogical Survey Inference System" href="../index.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CosmoSIS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">CosmoSIS Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#concepts-notebook">Concepts Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-cosmosis-does">What CosmoSIS does</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datablocks">DataBlocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#samplers">Samplers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-interface">User Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing CosmoSIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using CosmoSIS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/tutorials.html">Tutorials: Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/samplers.html">Samplers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/parameter_files.html">CosmoSIS Parameter Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/standard_library_overview.html">Standard Library Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/upgrading.html">Upgrading from the previous CosmoSIS Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bonus Features:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/sampler_features.html">Sampler Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/pipeline_features.html">Pipeline Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/parameter_features.html">Parameter Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/campaign.html">Managing sets of runs with a Campaign</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing modules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/api_python.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api_c.html">C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api_cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api_f90.html">Fortran API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/cosmosis_command_line.html">Command line flags for cosmosis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/cosmosis_campaign.html">cosmosis-campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/cosmosis_configure.html">Command line flags for cosmosis-configure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/cosmosis_extract.html">Command line flags for cosmosis-extract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/cosmosis_sample_fisher.html">Command line flags for cosmosis-sample-fisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/postprocess_command_line.html">Command line flags for postprocess</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/standard_library_complete.html">Standard Library Complete Listing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/nersc_examples.html">NERSC Submission Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/faq.html">Frequently Asked Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CosmoSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CosmoSIS Concepts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/intro/overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cosmosis-concepts">
<h1>CosmoSIS Concepts<a class="headerlink" href="#cosmosis-concepts" title="Link to this heading"></a></h1>
<section id="concepts-notebook">
<h2>Concepts Notebook<a class="headerlink" href="#concepts-notebook" title="Link to this heading"></a></h2>
<p>You can explore the concepts described here in the
<a class="reference external" href="https://github.com/joezuntz/cosmosis/blob/main/examples/cosmosis-introduction.ipynb">CosmoSIS intro notebook</a>.</p>
</section>
<section id="what-cosmosis-does">
<h2>What CosmoSIS does<a class="headerlink" href="#what-cosmosis-does" title="Link to this heading"></a></h2>
<p>CosmoSIS connects together <strong>samplers</strong>, which decide how to explore a cosmological parameter space, with <strong>pipelines</strong> made from a sequence of <strong>modules</strong>, which calculate the steps needed to get a likelihood functions. You have to decide on what calculations your likelihood function should consist of and choose or write modules that perform them.</p>
<p>Here is an example schematic of a CosmoSIS run of a weak lensing analysis:</p>
<img alt="../_images/cosmosis-architecture.png" src="../_images/cosmosis-architecture.png" />
<ul class="simple">
<li><p>The green sampler generates parameters and sends them to the pipeline. At the end it gets a total likelihood back.</p></li>
<li><p>The blue modules are independent codes run in the numbered sequence.  They each perform one step in the calculation of the likelihood.</p></li>
<li><p>The purples connections show each module reading inputs from the datablock, and then saving their results back to it.</p></li>
<li><p>The yellow DataBlock acts like a big lookup table for data.  It stores the initial parameters and then the results from each module.</p></li>
<li><p>The blue Likelihood module (number 11) has a special output - it computes a final likelihood value.</p></li>
</ul>
</section>
<section id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Link to this heading"></a></h2>
<p>For many cosmological models, calculating the theoretical prediction of a model is a long and complicated process with many steps.  CosmoSIS organizes each of those steps as a separate piece of code, called a module.  The CosmoSIS Standard Library comes with a large collection of popular cosmology codes packaged as modules, and it is easy to make your own modules.</p>
<p>For example, we package the Boltzmann code CAMB as a module - it takes in cosmological parameters as inputs and calculates cosmological power spectra as outputs.</p>
<p>To become a CosmoSIS module, a piece of code in python, C, C++, or Fortran just needs to have two specially named functions in it: <code class="code docutils literal notranslate"><span class="pre">setup</span></code> and <code class="code docutils literal notranslate"><span class="pre">execute</span></code>.  The setup function is run once, a the start of the CosmoSIS process.  The execute function is run again each time there are new input parameters for which the sampler wants the likelihood.</p>
<img alt="../_images/cosmosis-connections.png" src="../_images/cosmosis-connections.png" />
</section>
<section id="datablocks">
<h2>DataBlocks<a class="headerlink" href="#datablocks" title="Link to this heading"></a></h2>
<p>CosmoSIS modules do not send their calculations on to each other directly.  Instead they communicate only with CosmoSIS, via a DataBlock.  A DataBlock is a look-up table that takes a pair of strings as keys (a section and a name) and maps them to a value, which can be either a single scalar value (integer, real, or complex number, or a string) or a (multi-dimensional) array of them.</p>
</section>
<section id="samplers">
<h2>Samplers<a class="headerlink" href="#samplers" title="Link to this heading"></a></h2>
<p>In CosmoSIS a <cite>sampler</cite> is a code that generates a series of sample sets of parameters on which the likelihood must be run.  Some of these are trivial, like the <cite>test</cite> sampler, which just generates a single sample.  Others are much more complex and explore the parameter space dynamically.  Most of them are what statisticians would genuinely consider to be a <em>sampler</em> - they generate samples from the posterior distribution.</p>
<p>There are many different samplers packaged with the code that are useful in different circumstances. They are all interact with the rest of CosmoSIS in very similar ways - they are configured from options in a parameter file, and they build a likelihood pipeline which they run whenever they have a new sample whose posterior they want to evaluate.</p>
</section>
<section id="user-interface">
<h2>User Interface<a class="headerlink" href="#user-interface" title="Link to this heading"></a></h2>
<p>CosmoSIS decides what analysis to perform using three configuration files that you write (one of them optional).  Theyt are all in the “ini” format, and are:</p>
<blockquote>
<div><ul class="simple">
<li><p>The parameter file, which describes the pipeline of the model you want to run and the sampler you want to run on it.  The <code class="code docutils literal notranslate"><span class="pre">setup</span></code> functions for modules look in this file.</p></li>
<li><p>The values file, which describes the numerical input parameters, some of which will probably be varied throughout the run. The samplers decide how to vary the parameter within the ranges it gives and modules look for these parameters in their <code class="code docutils literal notranslate"><span class="pre">execute</span></code> functions.</p></li>
<li><p>The priors file, which optionally describes additional priors on the input parameters.  There is always an implicit Uniform prior on the value; adding a prior here creates an additional prior.  If you do not set a priors file then there will be no additional priors.</p></li>
</ul>
</div></blockquote>
<p>When you execute CosmoSIS you tell it the parameter file on the command line.  The parameter file tells CosmoSIS where to find the other two files.</p>
<p>The “ini” format splits a file into sections, which are named using square brackets, and keys and values within those sections.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">section_name</span><span class="p">]</span>
<span class="n">parameter_name</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
<p>Values can be integers, doubles, complex, or strings.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="CosmoSIS: The COSMOlogical Survey Inference System" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="installation.html" class="btn btn-neutral float-right" title="Installing CosmoSIS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, The CosmoSIS Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>