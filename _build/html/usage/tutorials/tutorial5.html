

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial 5: Two-Point Pipelines &mdash; CosmoSIS 3.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=26f62d79"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Tutorial 6: Writing new modules" href="tutorial6.html" />
    <link rel="prev" title="Tutorial 4: Building new pipelines" href="tutorial4.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            CosmoSIS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro/overview.html">CosmoSIS Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/installation.html">Installing CosmoSIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using CosmoSIS:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials: Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial1.html">Tutorial 1: Computing a single cosmology likelihood</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial2.html">Tutorial 2: Running an MCMC sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial3.html">Tutorial 3: Making plots and statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial4.html">Tutorial 4: Building new pipelines</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tutorial 5: Two-Point Pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#science-overview">Science Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-pipeline">Running the pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#consistency-filling-in-cosmological-parameters">Consistency: filling in cosmological parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#camb-matter-power-spectra">CAMB: matter power spectra</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-nz-fits-number-density">load_nz_fits: Number Density</a></li>
<li class="toctree-l3"><a class="reference internal" href="#project-2d-c-ell-with-the-limber-approximation">project_2d: C_ell with the Limber approximation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cl-to-xi-nicaea-correlation-functions-with-a-hankel-transform">cl_to_xi_nicaea: correlation functions with a Hankel Transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pt-likelihoods-of-two-point-correlation-quantities">2pt: likelihoods of two-point correlation quantities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial6.html">Tutorial 6: Writing new modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../samplers.html">Samplers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameter_files.html">CosmoSIS Parameter Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard_library_overview.html">Standard Library Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading.html">Upgrading from the previous CosmoSIS Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bonus Features:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../features/sampler_features.html">Sampler Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features/pipeline_features.html">Pipeline Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features/parameter_features.html">Parameter Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features/campaign.html">Managing sets of runs with a Campaign</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing modules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_python.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_c.html">C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_f90.html">Fortran API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/cosmosis_command_line.html">Command line flags for cosmosis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/cosmosis_campaign.html">cosmosis-campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/cosmosis_configure.html">Command line flags for cosmosis-configure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/cosmosis_extract.html">Command line flags for cosmosis-extract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/cosmosis_sample_fisher.html">Command line flags for cosmosis-sample-fisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/postprocess_command_line.html">Command line flags for postprocess</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/standard_library_complete.html">Standard Library Complete Listing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/nersc_examples.html">NERSC Submission Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help/faq.html">Frequently Asked Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CosmoSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../tutorials.html">Tutorials: Getting Started</a></li>
      <li class="breadcrumb-item active">Tutorial 5: Two-Point Pipelines</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/usage/tutorials/tutorial5.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial-5-two-point-pipelines">
<h1>Tutorial 5: Two-Point Pipelines<a class="headerlink" href="#tutorial-5-two-point-pipelines" title="Link to this heading">ÔÉÅ</a></h1>
<p>CosmoSIS has been widely used in weak lensing and galaxy clustering science.</p>
<p>This tutorial describes a pipeline for CFHTLenS, a slightly older data set without some of the more complicated systmatic error treatments from more recent analyses, making for a simpler likelihood.</p>
<section id="science-overview">
<h2>Science Overview<a class="headerlink" href="#science-overview" title="Link to this heading">ÔÉÅ</a></h2>
<p>The general sequence of calculations for correlation function likelihoods is:</p>
<ul class="simple">
<li><p>Compute the 3D matter power spectra P(k, z)</p></li>
<li><p>Determine galaxy source number density n(z)</p></li>
<li><p>Use the Limber equation (or a more precise equivalent) to integrate these two together and get the 2D power spectra C_ell</p></li>
<li><p>Use a Hankel transform (or a more precise equivalent) to convert from Fourier space C_ell to real space correlation functions</p></li>
<li><p>Compare the correlation functions to measurements</p></li>
</ul>
<p>Modules in the CFHTLens pipeline correspond to the steps above, as shown in this pipeline diagram (see <a class="reference internal" href="../../features/pipeline_features.html"><span class="doc">Pipeline Features</span></a>).</p>
<img alt="../../_images/cfhtlens.png" src="../../_images/cfhtlens.png" />
</section>
<section id="running-the-pipeline">
<h2>Running the pipeline<a class="headerlink" href="#running-the-pipeline" title="Link to this heading">ÔÉÅ</a></h2>
<p>You can run the CFHTLenS likelihoods like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosmosis</span> <span class="n">examples</span><span class="o">/</span><span class="n">cfhtlens</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
<p>The top part of the output is printed during the setup phase of the pipeline. It describes data that is loaded and other configuration that is done.  The likelihood evaluation appears below, after the lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">****************************</span>
<span class="o">*</span> <span class="n">Running</span> <span class="n">sampler</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span> <span class="n">test</span>
<span class="o">****************************</span>
</pre></div>
</div>
<p>As well as printing output to the screen, the test sampler used here can also save a directory containing everything calculated in the pipeline.  In this case, the parameter <code class="docutils literal notranslate"><span class="pre">save_dir</span></code> in the <code class="docutils literal notranslate"><span class="pre">test</span></code> section tells it to save the results to <code class="docutils literal notranslate"><span class="pre">outputs/cfhtlens</span></code>.</p>
<p>As you read through the sections below, have a look at the contents of that directory to explore the calculations done in the pipeline. The directory names correspond to the block section names, shown as yellow nodes in the image above.</p>
<p>The pipeline runs the following modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">pipeline</span><span class="p">]</span>
<span class="n">modules</span> <span class="o">=</span> <span class="n">consistency</span>  <span class="n">camb</span>  <span class="n">load_nz</span>  <span class="n">shear_shear</span>  <span class="mi">2</span><span class="n">pt</span>  <span class="n">cfhtlens</span>
</pre></div>
</div>
<p>which we now discuss in order.</p>
</section>
<section id="consistency-filling-in-cosmological-parameters">
<h2>Consistency: filling in cosmological parameters<a class="headerlink" href="#consistency-filling-in-cosmological-parameters" title="Link to this heading">ÔÉÅ</a></h2>
<p>This pipeline section runs the handy cosmosis utility <a class="reference internal" href="../../reference/standard_library/consistency.html"><span class="doc">consistency</span></a>, which takes any set of cosmological parameters, and computes a full suite of others from them.  For example, if you specify H0 and Omega_m then it knows how to generate ombh2.</p>
<p>This module lets you sample over any reasonable choice of parameters and have it compute the other parametrizations.</p>
<p>By default the consistency module is silent; if you want to understand the calculations it does you can set the <code class="code docutils literal notranslate"><span class="pre">verbose</span></code> parameter to T(rue):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">consistency</span><span class="p">]</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">utility</span><span class="o">/</span><span class="n">consistency</span><span class="o">/</span><span class="n">consistency_interface</span><span class="o">.</span><span class="n">py</span>
<span class="n">verbose</span> <span class="o">=</span> <span class="n">F</span>
</pre></div>
</div>
</section>
<section id="camb-matter-power-spectra">
<h2>CAMB: matter power spectra<a class="headerlink" href="#camb-matter-power-spectra" title="Link to this heading">ÔÉÅ</a></h2>
<p>In this version of CosmoSIS the linear and non-linear matter power calculations are usually done with the <a class="reference internal" href="../../reference/standard_library/camb.html"><span class="doc">camb</span></a> module.  This takes the cosmological parameters as input and computes the linear and non-linear matter power spectra, and background values like distances as a function of redshift.</p>
<p>It also calculates CMB spectra if you need those.</p>
<p>The configuration used here for camb is this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">camb</span><span class="p">]</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">boltzmann</span><span class="o">/</span><span class="n">camb</span><span class="o">/</span><span class="n">camb_interface</span><span class="o">.</span><span class="n">py</span>

<span class="p">;</span> <span class="n">This</span> <span class="n">means</span> <span class="n">to</span> <span class="n">calculate</span> <span class="n">everything</span>
<span class="p">;</span> <span class="n">including</span> <span class="n">matter</span> <span class="n">power</span>
<span class="n">mode</span> <span class="o">=</span> <span class="nb">all</span>
<span class="n">lmax</span> <span class="o">=</span> <span class="mi">2500</span>

<span class="p">;</span> <span class="n">You</span> <span class="n">would</span> <span class="nb">set</span> <span class="n">this</span> <span class="n">to</span> <span class="n">zero</span> <span class="n">during</span> <span class="n">an</span> <span class="n">MCMC</span>
<span class="p">;</span> <span class="n">run</span> <span class="n">to</span> <span class="n">avoid</span> <span class="n">too</span> <span class="n">much</span> <span class="n">line</span> <span class="n">noise</span>
<span class="n">feedback</span><span class="o">=</span><span class="mi">2</span>

<span class="p">;</span> <span class="n">This</span> <span class="n">means</span> <span class="n">to</span> <span class="n">get</span> <span class="n">non</span><span class="o">-</span><span class="n">linear</span> <span class="n">P</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">but</span>
<span class="p">;</span> <span class="ow">not</span> <span class="n">bother</span> <span class="k">with</span> <span class="n">non</span><span class="o">-</span><span class="n">linear</span> <span class="n">CMB</span> <span class="n">lensing</span>
<span class="n">NonLinear</span> <span class="o">=</span> <span class="n">pk</span>

<span class="p">;</span> <span class="n">These</span> <span class="n">choices</span> <span class="n">values</span> <span class="n">should</span> <span class="n">be</span> <span class="n">explored</span>
<span class="p">;</span> <span class="n">to</span> <span class="n">check</span> <span class="k">for</span> <span class="n">convergence</span>
<span class="n">kmax</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">kmax_extrapolate</span> <span class="o">=</span> <span class="mf">500.0</span>
<span class="n">nk</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">zmin</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">zmax</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="n">nz</span> <span class="o">=</span> <span class="mi">100</span>
</pre></div>
</div>
<p>The code has a huge number of other parameters that you can experiment with!  It can also accept many different choices of cosmological parameter.</p>
</section>
<section id="load-nz-fits-number-density">
<h2>load_nz_fits: Number Density<a class="headerlink" href="#load-nz-fits-number-density" title="Link to this heading">ÔÉÅ</a></h2>
<p>Lensing observables depend on the number density distribution n(z) of the galaxies observed in the sample.</p>
<p>This module, <a class="reference internal" href="../../reference/standard_library/load_nz_fits.html"><span class="doc">load_nz_fits</span></a>, loads a number density n(z) from a file, and then each evaluation of the likelihood it puts that value in the block.  Recall that a fresh data block is made for each likelihood evaluation, so the n(z) is put in there anew each time (the overhead is negligible).</p>
<p>We get n(z) from the FITS format used in DES and KIDS in this module; another module, <a class="reference internal" href="../../reference/standard_library/load_nz.html"><span class="doc">load_nz</span></a> can be used instead if you prefer to use a text file.</p>
<p>The configuration for this module specifies the name of the file to load, and the name of the FITS extension to load from the file, <code class="code docutils literal notranslate"><span class="pre">NZ_SAMPLE</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">load_nz</span><span class="p">]</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">number_density</span><span class="o">/</span><span class="n">load_nz_fits</span><span class="o">/</span><span class="n">load_nz_fits</span><span class="o">.</span><span class="n">py</span>
<span class="n">nz_file</span> <span class="o">=</span> <span class="n">likelihood</span><span class="o">/</span><span class="n">cfhtlens</span><span class="o">/</span><span class="n">cfhtlens_heymans13</span><span class="o">.</span><span class="n">fits</span>
<span class="n">data_sets</span> <span class="o">=</span> <span class="n">SAMPLE</span>
</pre></div>
</div>
<p>This module saves the n(z) data to the <code class="docutils literal notranslate"><span class="pre">nz_sample</span></code> section of the datablock.</p>
</section>
<section id="project-2d-c-ell-with-the-limber-approximation">
<h2>project_2d: C_ell with the Limber approximation<a class="headerlink" href="#project-2d-c-ell-with-the-limber-approximation" title="Link to this heading">ÔÉÅ</a></h2>
<p>The CosmoSIS standard library module <a class="reference internal" href="../../reference/standard_library/project_2d.html"><span class="doc">project_2d</span></a> can be used to
integrate 3D power spectra (such as matter or galaxy power spectra)
with a pair of kernels into 2D power spectra using the Limber integral.</p>
<p>This is an approximation which often applies at small scales and/or when
using a broad enough kernel.</p>
<p>In a flat cosmology the Limber integral is:</p>
<div class="math notranslate nohighlight">
\[C^{12}_\ell =  A \int_0^{\chi_1} W_1(\chi) W_2(\chi) P(k=(l+0.5)/\chi, z(\chi)) / chi^2 d\chi\]</div>
<p>where the two W functions are kernels that describe the response of the statistic to
with distance and P is a 3D power spectrum.  Different quantities can be calculated using different
choices for the W and P functions.</p>
<p>For galaxy clustering spectra, P is the galaxy power spectrum and
the W functions are the galaxy number densities n(z).</p>
<p>For weak lensing spectra, P is the matter power spectrum and the W functions
are given by:</p>
<div class="math notranslate nohighlight">
\[W^{\mathrm{WL}}_\chi =  \frac{3}{2}\Omega_m H_0^2 a^{-1}(\chi) \chi \frac{1}{\bar{n}} \int_\chi^\infty \mathrm{d}\chi_s n(\chi_s) \frac{\chi_s - \chi}{\chi_s}\]</div>
<p>The pipeline parameter file uses these configuration options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">shear_shear</span><span class="p">]</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">structure</span><span class="o">/</span><span class="n">projection</span><span class="o">/</span><span class="n">project_2d</span><span class="o">.</span><span class="n">py</span>
<span class="n">shear</span><span class="o">-</span><span class="n">shear</span> <span class="o">=</span> <span class="n">sample</span><span class="o">-</span><span class="n">sample</span>
<span class="n">verbose</span> <span class="o">=</span> <span class="n">T</span>
<span class="n">ell_min</span> <span class="o">=</span> <span class="mf">20.0</span>
<span class="n">ell_max</span> <span class="o">=</span> <span class="mf">10000.0</span>
<span class="n">n_ell</span> <span class="o">=</span> <span class="mi">220</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">shear-shear</span></code> choice tells the module to cross-correlate the n(z) found in the <code class="docutils literal notranslate"><span class="pre">nz_sample</span></code> section with itself.  We could also get galaxy clustering C_ell using <code class="docutils literal notranslate"><span class="pre">position-position</span></code>, or a range of others (see the module page for <a class="reference internal" href="../../reference/standard_library/project_2d.html"><span class="doc">project_2d</span></a>).</p>
<p>The ell choices specify the output values - we set them large enough that we can perform the Hankel Transform below.</p>
</section>
<section id="cl-to-xi-nicaea-correlation-functions-with-a-hankel-transform">
<h2>cl_to_xi_nicaea: correlation functions with a Hankel Transform<a class="headerlink" href="#cl-to-xi-nicaea-correlation-functions-with-a-hankel-transform" title="Link to this heading">ÔÉÅ</a></h2>
<p>The CosmoSIS standard library module <a class="reference internal" href="../../reference/standard_library/cl_to_xi_nicaea.html"><span class="doc">cl_to_xi_nicaea</span></a> converts the Fourier space C_ell values to real space correlation functions, which are our observable here.</p>
<p>The calculation done for shear-shear correlations is:</p>
<div class="math notranslate nohighlight">
\[\xi_{(+/-)}(\theta) = \int_0^\infty C_\ell J_{(0/4)}(\ell \theta) \ell \mathrm{d} \ell / 2 \pi\]</div>
<p>This is the default in Nicaea, so there are no configuration options in this section.  If we wanted to do clustering correlations, or to customize the input or output section names (for example if we had multiple galaxy samples) then we could add parameters to do that</p>
</section>
<section id="pt-likelihoods-of-two-point-correlation-quantities">
<h2>2pt: likelihoods of two-point correlation quantities<a class="headerlink" href="#pt-likelihoods-of-two-point-correlation-quantities" title="Link to this heading">ÔÉÅ</a></h2>
<p>Finally, we reach our likelihood.  CosmoSIS has a general-purpose likelihood module for the DES/KIDS two-point FITS data format, called <a class="reference internal" href="../../reference/standard_library/2pt.html"><span class="doc">2pt</span></a></p>
<p>The start of the configuration for this section looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">cfhtlens</span><span class="p">]</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">likelihood</span><span class="o">/</span><span class="mi">2</span><span class="n">pt</span><span class="o">/</span><span class="mi">2</span><span class="n">pt_like</span><span class="o">.</span><span class="n">py</span>
<span class="n">data_file</span> <span class="o">=</span> <span class="n">likelihood</span><span class="o">/</span><span class="n">cfhtlens</span><span class="o">/</span><span class="n">cfhtlens_heymans13</span><span class="o">.</span><span class="n">fits</span>

<span class="n">like_name</span> <span class="o">=</span> <span class="n">cfhtlens</span>
<span class="n">data_sets</span> <span class="o">=</span> <span class="n">xi_plus</span> <span class="n">xi_minus</span>

<span class="n">covariance_realizations</span> <span class="o">=</span> <span class="mi">1656</span>

<span class="n">angle_range_xi_plus_1_1</span> <span class="o">=</span> <span class="mf">2.0</span>  <span class="mf">999999.0</span>
<span class="n">angle_range_xi_plus_1_2</span> <span class="o">=</span> <span class="mf">2.0</span>  <span class="mf">999999.0</span>
<span class="o">...</span>
</pre></div>
</div>
<p>We use the same <code class="docutils literal notranslate"><span class="pre">data_file</span></code> as we used before (the FITS file contains both the n(z) and the correlation functions).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">like_name</span></code> parameter specifies that the module should name the output likelihood <code class="docutils literal notranslate"><span class="pre">cfhtlens</span></code> rather then the generic <code class="docutils literal notranslate"><span class="pre">2pt</span></code> - this is a convenience for clarity.</p>
<p>We choose which data points to load from the file by setting then <code class="docutils literal notranslate"><span class="pre">data_sets</span></code> parameter - the two-point format has named sections for the different data types.  This file format records the data type of the <code class="docutils literal notranslate"><span class="pre">xi_plus</span></code> and <code class="docutils literal notranslate"><span class="pre">xi_minus</span></code> data points in the file, so the module uses these to choose which sections of the data block should be searched for the relevant theory predictions.</p>
<p>The CFHTLenS covariance was estimated from simulations. This means it should be corrected by the Anderson-Hartlap factor, <span class="math notranslate nohighlight">\(\frac{r - 1}{r - n - 2}\)</span> where r is the number of simulations and n the number of data points.  Setting the <code class="docutils literal notranslate"><span class="pre">covariance_realizations</span></code> parameter does this automatically.</p>
<p>The final (long!) set of parameters is an angular scale cut, one for each pair of bins.  The CFHTLenS data goes down to <span class="math notranslate nohighlight">\(\theta \approx\)</span> 1 arcmin, which includes scales that we do not know how to model.  These parameter remove those data points.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tutorial4.html" class="btn btn-neutral float-left" title="Tutorial 4: Building new pipelines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial6.html" class="btn btn-neutral float-right" title="Tutorial 6: Writing new modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, The CosmoSIS Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>