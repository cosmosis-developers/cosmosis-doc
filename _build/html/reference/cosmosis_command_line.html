

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Command line flags for cosmosis &mdash; CosmoSIS 3.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=26f62d79"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cosmosis-campaign" href="cosmosis_campaign.html" />
    <link rel="prev" title="Fortran API" href="../api/api_f90.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CosmoSIS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/overview.html">CosmoSIS Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/installation.html">Installing CosmoSIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using CosmoSIS:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/tutorials.html">Tutorials: Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/samplers.html">Samplers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/parameter_files.html">CosmoSIS Parameter Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/standard_library_overview.html">Standard Library Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/upgrading.html">Upgrading from the previous CosmoSIS Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bonus Features:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/sampler_features.html">Sampler Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/pipeline_features.html">Pipeline Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/parameter_features.html">Parameter Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/campaign.html">Managing sets of runs with a Campaign</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing modules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/api_python.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api_c.html">C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api_cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api_f90.html">Fortran API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Command line flags for cosmosis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parallelization">Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overriding-parameter-files">Overriding Parameter Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pipeline-visualization">Pipeline Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#performance-profiling">Performance Profiling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cosmosis_campaign.html">cosmosis-campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="cosmosis_configure.html">Command line flags for cosmosis-configure</a></li>
<li class="toctree-l1"><a class="reference internal" href="cosmosis_extract.html">Command line flags for cosmosis-extract</a></li>
<li class="toctree-l1"><a class="reference internal" href="cosmosis_sample_fisher.html">Command line flags for cosmosis-sample-fisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocess_command_line.html">Command line flags for postprocess</a></li>
<li class="toctree-l1"><a class="reference internal" href="standard_library_complete.html">Standard Library Complete Listing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="nersc_examples.html">NERSC Submission Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/faq.html">Frequently Asked Questions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CosmoSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Command line flags for cosmosis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reference/cosmosis_command_line.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="command-line-flags-for-cosmosis">
<h1>Command line flags for cosmosis<a class="headerlink" href="#command-line-flags-for-cosmosis" title="Link to this heading"></a></h1>
<p>You can view command line flags for cosmosis using the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosmosis</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<section id="parallelization">
<h2>Parallelization<a class="headerlink" href="#parallelization" title="Link to this heading"></a></h2>
<p>The two flags <code class="code docutils literal notranslate"><span class="pre">--mpi</span></code> and <code class="code docutils literal notranslate"><span class="pre">--smp</span></code> run the code in parallel.</p>
<p>The MPI flag runs the code under MPI, which means different processes are launched and communicate with each other.  This requires the MPI runtime to be installed, and you must run cosmosis with the <code class="code docutils literal notranslate"><span class="pre">mpirun</span></code> command first.  This will depend on the details of your system, but usually a command like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">-</span><span class="n">n</span> <span class="mi">4</span> <span class="n">cosmosis</span> <span class="o">--</span><span class="n">mpi</span> <span class="n">params</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
<p>will run CosmoSIS using 4 processes.  All the parallel cosmosis samplers can run under MPI, and it can be used on large machines like supercomputers across nodes.</p>
<p>The SMP flag runs with the python multiprocessing module, which starts one process and then forks new ones. You would use it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosmosis</span> <span class="o">--</span><span class="n">smp</span> <span class="mi">4</span> <span class="n">params</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
<p>Most of the cosmosis samplers can use SMP, but not the Multinest or Polychord samplers. It can only run on single nodes of larger machines.</p>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Link to this heading"></a></h2>
<p>CosmoSIS has two commands that help with debugging, <code class="code docutils literal notranslate"><span class="pre">--pdb</span></code> and <code class="code docutils literal notranslate"><span class="pre">--segfaults</span></code>.</p>
<p>If your code fails and crashes while running any python module (not C, C++, or Fortran) then the <code class="code docutils literal notranslate"><span class="pre">--pdb</span></code> flag will mean rather than just crashing the code will stop at the point of the error and you will enter the python debugger, PDB.  You can read about how to use this debugger here: <a class="reference external" href="https://docs.python.org/3/library/pdb.html">https://docs.python.org/3/library/pdb.html</a></p>
<p>The <code class="code docutils literal notranslate"><span class="pre">--segfaults</span></code> flag means that if your code crashes during a C, C++, or Fortran module you will get a traceback listing which functions were being run at the time.</p>
</section>
<section id="overriding-parameter-files">
<h2>Overriding Parameter Files<a class="headerlink" href="#overriding-parameter-files" title="Link to this heading"></a></h2>
<p>It can be useful to override parameters specified in the configuration files on the command line - this can let you launch a variety of different runs with the same file.  The <code class="code docutils literal notranslate"><span class="pre">-p</span></code> and <code class="code docutils literal notranslate"><span class="pre">-v</span></code> flags let you override parameters in the main (params.ini) and values files respectively.</p>
<p>You can override any number of parameters in the main parameter file like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosmosis</span> <span class="n">params</span><span class="o">.</span><span class="n">ini</span> <span class="o">-</span><span class="n">p</span> <span class="n">section1</span><span class="o">.</span><span class="n">name1</span><span class="o">=</span><span class="n">value</span>  <span class="n">section2</span><span class="o">.</span><span class="n">name2</span><span class="o">=</span><span class="n">value</span> <span class="o">...</span>
</pre></div>
</div>
<p>For example, this command would change the sampler being used to emcee instead of its current value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosmosis</span> <span class="n">params</span><span class="o">.</span><span class="n">ini</span> <span class="o">-</span><span class="n">p</span> <span class="n">runtime</span><span class="o">.</span><span class="n">sampler</span><span class="o">=</span><span class="n">test</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">-v</span></code> command is used exactly the same way but for the values file, for example, this would change one of the parameter ranges in demo 5:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosmosis</span> <span class="n">demos</span><span class="o">/</span><span class="n">demo5</span><span class="o">.</span><span class="n">ini</span>  <span class="o">-</span><span class="n">v</span> <span class="n">cosmological_parameters</span><span class="o">.</span><span class="n">omega_m</span><span class="o">=</span><span class="s2">&quot;0.2 0.3 0.5&quot;</span>
</pre></div>
</div>
<p>Note the quotations marks above, which are needed when there are spaces in the parameter value.</p>
<p>You can also use the flag <code class="code docutils literal notranslate"><span class="pre">--only</span> <span class="pre">section--name</span></code> to fix all parameters except for the one called <code class="code docutils literal notranslate"><span class="pre">name</span></code> in <code class="code docutils literal notranslate"><span class="pre">section</span></code> to their default values.</p>
</section>
<section id="pipeline-visualization">
<h2>Pipeline Visualization<a class="headerlink" href="#pipeline-visualization" title="Link to this heading"></a></h2>
<p>CosmoSIS can generate a graphical representation of your pipeline showing how data flows between modules using the <code class="code docutils literal notranslate"><span class="pre">--graph</span></code> option. For detailed information about making pipeline graphs, see <a class="reference internal" href="../features/pipeline_features.html"><span class="doc">Pipeline Features</span></a>.</p>
<p>This creates a graphviz “dot” format file that shows the pipeline structure and data dependencies. You can then convert this to a visual format using graphviz tools:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dot</span> <span class="o">-</span><span class="n">Tpng</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">dot</span> <span class="o">-</span><span class="n">o</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<p>This feature requires the pygraphviz Python library to be installed.</p>
</section>
<section id="performance-profiling">
<h2>Performance Profiling<a class="headerlink" href="#performance-profiling" title="Link to this heading"></a></h2>
<p>CosmoSIS includes built-in CPU profiling capabilities using the <code class="code docutils literal notranslate"><span class="pre">--profile</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosmosis</span> <span class="n">params</span><span class="o">.</span><span class="n">ini</span> <span class="o">--</span><span class="n">profile</span> <span class="n">profile_output</span><span class="o">.</span><span class="n">stats</span>
</pre></div>
</div>
<p>This saves detailed timing information about which functions are taking the most time during execution. The profile data can be analyzed using Python’s <code class="code docutils literal notranslate"><span class="pre">pstats</span></code> module or viewed using tools like <code class="code docutils literal notranslate"><span class="pre">snakeviz</span></code>.</p>
<p>When running in parallel, separate profile files are created for each process (e.g., <code class="code docutils literal notranslate"><span class="pre">profile_output.stats.0</span></code>, <code class="code docutils literal notranslate"><span class="pre">profile_output.stats.1</span></code>, etc.).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../api/api_f90.html" class="btn btn-neutral float-left" title="Fortran API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cosmosis_campaign.html" class="btn btn-neutral float-right" title="cosmosis-campaign" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, The CosmoSIS Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>